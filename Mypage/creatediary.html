<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dear Diary_Create Diary</title>
</head>

<!-- js, css START-->

<link rel="icon" type="image/x-icon" href="../img/leaf.ico" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://awwapp.com/static/widget/js/aww.min.js"></script>
<!-- Popper.JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script language="JavaScript" src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script language="JavaScript" src="https://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js"
    type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.css">

<link href="../Mypage/mypage_css/sidebar.css" rel="stylesheet" type="text/css">
<link href="../Mypage/mypage_css/scategory.css" rel="stylesheet" type="text/css">
<link href="../Mypage/mypage_css/sdiarylist.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="./creatediary_css/creatediary.css" type="text/css">
<link rel="stylesheet" href="./creatediary_css/exportmodal.css" type="text/css">
<link rel="stylesheet" href="./creatediary_css/exportmodal.css" type="text/css">
<link rel="stylesheet" href="./creatediary_css/selectcategory.css" type="text/css">
<link rel="stylesheet" href="./creatediary_css/addcategorymodal.css" type="text/css">


<!-- js, css  END-->

<body>
    <!-- Bootstrap row -->
    <div class="row" id="body-row">
        <!-- Sidebar -->
        <div id="sidebar-container" class="sidebar-expanded d-none d-md-block">
            <!-- d-* hiddens the Sidebar in smaller devices. Its itens can be kept on the Navbar 'Menu' -->
            <!-- Bootstrap List Group -->
            <!-- <span class="fas fa-leaf fa-x" style="color:white"></span> -->
            <span class="menu-collapsed">
                <a href="../Mypage/mypage_tab.html">
                    <img id="logo3" src="../img/logo_gray.png" alt="">
                </a>
            </span>
            <ul class="list-group">
                <!-- Separator with title -->
                <!-- <img id="logo" src="../img/logo_black.png" alt=""> -->
                <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
                    <small>MAIN MENU</small>
                </li>
                <!-- /END Separator -->


                <!-- Menu 1 -->
                <a href="../Mypage/mypage_tab.html" class="bg-dark list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-user fa-fw mr-3"></span>
                        <span class="menu-collapsed">My Page</span>

                    </div>
                </a>

                <!-- Menu 2-->
                <a href="../Mypage/creatediary.html" class="bg-dark list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-tasks fa-fw mr-3"></span>
                        <span class="menu-collapsed">Create Diary</span>

                    </div>
                </a>

                <!-- Separator with title -->
                <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
                    <small>OPTIONS</small>
                </li>
                <!-- /END Separator -->
                <!-- Menu 3-->
                <a href="../Mypage/analysis.html" class="bg-dark list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <span class="fa fa-dashboard fa-fw mr-3"></span>
                        <span class="menu-collapsed">Analysis</span>
                    </div>
                </a>

                <!-- Separator without title -->
                <li class="list-group-item sidebar-separator menu-collapsed"></li>
                <!-- /END Separator -->
                <a href="../src/help.html" class="bg-dark list-group-item list-group-item-action">
                 <div class="d-flex w-100 justify-content-start align-items-center">
                     <span class="fa fa-question fa-fw mr-3"></span>
                     <span class="menu-collapsed">Help</span>
                 </div>
             </a>
            <!-- Separator without title -->
            <li class="list-group-item sidebar-separator menu-collapsed"></li>
            <!-- /END Separator -->
           
            <li class="list-group-item sidebar-separator menu-collapsed"></li>
                       <!-- /END Separator -->
                       <a href="../src/home.html" class="bg-dark list-group-item list-group-item-action">
                           <div class="d-flex w-100 justify-content-start align-items-center">
                               <span class="fa fa-sign-out fa-fw mr-3"></span>
                               <span class="menu-collapsed">Logout</span>
                           </div>
                       </a>
            <a href="#top" data-toggle="sidebar-colapse" class="bg-dark list-group-item list-group-item-action d-flex align-items-center">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <span id="collapse-icon" class="fa fa-2x mr-3"></span>
                    <span id="collapse-text" class="menu-collapsed">Collapse</span>
                </div>
            </a>
        </ul>
        <!-- List Group END-->
    </div>
        <!-- sidebar-container END -->


        <!-- MAIN -->
        <div id="creatediary" class="col-10" style="display:block; margin-left: auto;margin-right: auto;">
            <div id="main" class="main">
                <div id=top>
                    <form autocomplete="off">
                        <input id="title" class="form-control shadow-none" type="text" placeholder="T I T L E">
                    </form>

                    <div class="dropdown" id='category'>
                        <button role="button" type="button" class="btn btn-primary shadow-none" data-toggle="dropdown" id="category_button" style="font-size:15px;">Choose Category</button>
                        <ul class="dropdown-menu dropdown-menu-right" id="category_menu">
                            <li class="categ">
                                <a href=#>DAILY DIARY</a>
                            </li>
                            <li class="categ">
                                <a href="#">WORKOUT</a>
                            </li>
                            <li class="categ">
                                <a href="#">STUDY PLANS</a>
                            </li>
                            <li class="categ">
                                <a href="#">TRAVEL</a>
                            </li>
                        </ul>
                    </div>


                    <button id="addcategory" class="btn btn-primary shadow-none">+</button>
                    <input id="calendar" class="form-control shadow-none" type="date">
                    <div class="dropdown" id='options'>
                        <button role="button" type="button" class="btn btn-primary shadow-none" data-toggle="dropdown" id="options_button" style="font-size:15px;">more</button>
                        <ul class="dropdown-menu dropdown-menu-right" id="options_menu">
                            <li id="undo" class="opt">
                                <a href=#>undo</a>
                            </li>
                            <li id="save" class="opt">
                                <a href="#">save</a>
                            </li>
                            <li id="export" class="opt">
                                <a href="#">export</a>
                            </li>
                        </ul>
                    </div>
                    <intput id="state" type="text" class="form-control shadow-none"></intput>


                </div>
                <div id="canvas_container">
                    <div id="canvas">
                        <div id="export_modal">
                            <div id="export_modal_content" class="form-control shadow-none">
                                <span id="export_modal_close">&times;</span>
                                <button id="export_png_button" class="form-control shadow-none">Download as PNG</button>
                                <button id="export_pdf_button" class="form-control shadow-none">Download as PDF</button>
                            </div>
                        </div>

                        <div id="addcategory_modal">
                            <div id="addcategory_content" class="form-control shadow-none">
                                <form autocomplete="off">
                                    <input id="addcategory_textfield" type="text" placeholder="Type Category Name">
                                </form>
                                <button id="addcategory_button" class="form-control shadow-none">Done</button>
                                <span id="addcategory_modal_close">&times;</span>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>



        <script type="text/javascript">

            window.onerror = function (msg, url, linenumber) {
                //alert('Error message: ' + msg + '\nURL: ' + url + '\nLine Number: ' + linenumber);
                return true;
            }


            document.addEventListener("DOMContentLoaded", function (event) {
                document.getElementById('calendar').valueAsDate = new Date();
                document.getElementById('calendar').datepicker({ language: "en" });
            });

            var aww = new AwwBoard('#canvas', {
                apiKey: 'f108f00a-3a70-4014-b852-82680916c6aa',
                sizes: [3, 5, 8, 13, 20],
                fontSizes: [10, 12, 16, 22, 30],
                menuOrder: ['colors', 'sizes', 'tools'],
                tools: ['pencil', 'marker', 'eraser', 'text', 'image'],
                colors: ["#000000", "#f44336", "#4caf50", "#2196f3",
                    "#ffc107", "#9c27b0", "#e91e63", "#795548"],
                defaultColor: "#000000",
                defaultSize: 8,
                defaultTool: 'pencil',
                enableZoom: false
            })

            document.getElementById("undo").addEventListener("click", function () {
                aww.doUndo();
            })

            document.getElementById("do").addEventListener("click", function () {
                aww.doRedo();
            })

            document.getElementById("category_button").addEventListener('click', function () {
                var elements = document.getElementsByClassName("categ");
                Array.from(elements).forEach(function (element) {
                    element.addEventListener('click', function () {
                        //alert(this.innerText)
                        //alert(document.getElementById("category_button").innerText)
                        document.getElementById("category_button").innerText = this.innerText
                    });
                });
            })




            document.getElementById("save").addEventListener("click", function () {
                document.getElementById("state").style.display = "inline"
                document.getElementById("state").innerText = "SAVING.."
                setTimeout(() => {
                    document.getElementById("state").style.color = '#7A63FF'
                    document.getElementById("state").innerText = "SAVED!"
                }, 1000);
                setTimeout(() => {
                    document.getElementById("state").style.display = "none"
                    document.getElementById("state").innerText = "SAVING.."
                }, 2000);
            })

            document.getElementById("addcategory_modal_close").addEventListener("click", function () {
                document.getElementById("addcategory_modal").style.display = "none"
            })
            document.getElementById("addcategory").addEventListener("click", function () {
                document.getElementById("addcategory_modal").style.display = "block"
            })

            document.getElementById("export_modal_close").addEventListener("click", function () {
                document.getElementById("export_modal").style.display = "none"
            })
            document.getElementById("export").addEventListener("click", function () {
                document.getElementById("export_modal").style.display = "block"
            })

            document.getElementById("export_png_button").addEventListener("click", function () {
                this.innerText = "Downloading.."
                this.style.color = '#74E0EF'
                setTimeout(() => {
                    this.innerText = "Donnload Complete"
                }, 1000);
                setTimeout(() => {
                    this.innerText = "Download as PNG"
                    this.style.color = "#ffffff"
                }, 2000);
            })

            document.getElementById("export_pdf_button").addEventListener("click", function () {
                this.innerText = "Downloading.."
                this.style.color = '#74E0EF'
                setTimeout(() => {
                    this.innerText = "Donnload Complete"
                }, 1000);
                setTimeout(() => {
                    this.innerText = "Download as PDF"
                    this.style.color = "#ffffff"
                }, 2000);
            })



            document.getElementById("addcategory_button").addEventListener("click", function () {
                var categoryname = document.getElementById("addcategory_textfield").value;
                document.getElementById("category_menu").innerHTML += "    <li class=\"categ\"><a href=\"#\">" + categoryname + "</a></li>\n"
                document.getElementById("category_menu").style.height += 35;
                document.getElementById("addcategory_modal").style.display = "none"
                document.getElementById("addcategory_textfield").value = ""

            })


            window.onclick = function (event) {
                var modal = document.getElementById("export_modal")
                var modal2 = document.getElementById("addcategory_modal")
                if (event.target == modal) {
                    modal.style.display = "none";
                }
                if (event.target == modal2) {
                    modal2.style.display = "none";
                }
            }





        </script>

        <script>
            // When the user scrolls the page, execute myFunction
            window.onscroll = function () { myFunction() };

            function myFunction() {
                var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                var scrolled = (winScroll / height) * 100;
                document.getElementById("myBar").style.width = scrolled + "%";
            }
        </script>

        <script>
            /*.not(':first')*/
            $('.panel-group').collapse(); // Collapse all but the first row on the page.

            // This section makes the search work.
            (function () {
                var searchTerm, panelContainerId;
                $('#accordion_search_bar').on('change keyup', function () {
                    searchTerm = $(this).val();
                    $('#accordion > .panel').each(function () {
                        panelContainerId = '#' + $(this).attr('id');

                        // Makes search to be case insesitive
                        $.extend($.expr[':'], {
                            'contains': function (elem, i, match, array) {
                                return (elem.textContent || elem.innerText || '').toLowerCase()
                                    .indexOf((match[3] || "").toLowerCase()) >= 0;
                            }
                        });

                        // END Makes search to be case insesitive

                        // Show and Hide Triggers
                        $(panelContainerId + ':not(:contains(' + searchTerm + '))').hide(); //Hide the rows that done contain the search query.
                        $(panelContainerId + ':contains(' + searchTerm + ')').show(); //Show the rows that do!



                    });
                });
            }());
                                                        // End Show and Hide Triggers

                                                        // END This section makes the search work.
        </script>
        <script>// Utility function
            function Util() { };

            /*
             class manipulation functions
             */
            Util.hasClass = function (el, className) {
                if (el.classList) return el.classList.contains(className);
                else return !!el.className.match(new RegExp('(\\s|^)' + className + '(\\s|$)'));
            };

            Util.addClass = function (el, className) {
                var classList = className.split(' ');
                if (el.classList) el.classList.add(classList[0]);
                else if (!Util.hasClass(el, classList[0])) el.className += " " + classList[0];
                if (classList.length > 1) Util.addClass(el, classList.slice(1).join(' '));
            };

            Util.removeClass = function (el, className) {
                var classList = className.split(' ');
                if (el.classList) el.classList.remove(classList[0]);
                else if (Util.hasClass(el, classList[0])) {
                    var reg = new RegExp('(\\s|^)' + classList[0] + '(\\s|$)');
                    el.className = el.className.replace(reg, ' ');
                }
                if (classList.length > 1) Util.removeClass(el, classList.slice(1).join(' '));
            };

            Util.toggleClass = function (el, className, bool) {
                if (bool) Util.addClass(el, className);
                else Util.removeClass(el, className);
            };

            Util.setAttributes = function (el, attrs) {
                for (var key in attrs) {
                    el.setAttribute(key, attrs[key]);
                }
            };

            /*
             DOM manipulation
             */
            Util.getChildrenByClassName = function (el, className) {
                var children = el.children,
                    childrenByClass = [];
                for (var i = 0; i < el.children.length; i++) {
                    if (Util.hasClass(el.children[i], className)) childrenByClass.push(el.children[i]);
                }
                return childrenByClass;
            };

            /*
             Animate height of an element
             */
            Util.setHeight = function (start, to, element, duration, cb) {
                var change = to - start,
                    currentTime = null;

                var animateHeight = function (timestamp) {
                    if (!currentTime) currentTime = timestamp;
                    var progress = timestamp - currentTime;
                    var val = parseInt((progress / duration) * change + start);
                    element.setAttribute("style", "height:" + val + "px;");
                    if (progress < duration) {
                        window.requestAnimationFrame(animateHeight);
                    } else {
                        cb();
                    }
                };

                //set the height of the element before starting animation -> fix bug on Safari
                element.setAttribute("style", "height:" + start + "px;");
                window.requestAnimationFrame(animateHeight);
            };

            /*
             Smooth Scroll
             */

            Util.scrollTo = function (final, duration, cb) {
                var start = window.scrollY || document.documentElement.scrollTop,
                    currentTime = null;

                var animateScroll = function (timestamp) {
                    if (!currentTime) currentTime = timestamp;
                    var progress = timestamp - currentTime;
                    if (progress > duration) progress = duration;
                    var val = Math.easeInOutQuad(progress, start, final - start, duration);
                    window.scrollTo(0, val);
                    if (progress < duration) {
                        window.requestAnimationFrame(animateScroll);
                    } else {
                        cb && cb();
                    }
                };

                window.requestAnimationFrame(animateScroll);
            };

            /*
             Focus utility classes
             */

            //Move focus to an element
            Util.moveFocus = function (element) {
                if (!element) element = document.getElementsByTagName("body")[0];
                element.focus();
                if (document.activeElement !== element) {
                    element.setAttribute('tabindex', '-1');
                    element.focus();
                }
            };

            /*
             Misc
             */

            Util.getIndexInArray = function (array, el) {
                return Array.prototype.indexOf.call(array, el);
            };

            Util.cssSupports = function (property, value) {
                if ('CSS' in window) {
                    return CSS.supports(property, value);
                } else {
                    var jsProperty = property.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });
                    return jsProperty in document.body.style;
                }
            };

            /*
             Polyfills
             */
            //Closest() method
            if (!Element.prototype.matches) {
                Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
            }

            if (!Element.prototype.closest) {
                Element.prototype.closest = function (s) {
                    var el = this;
                    if (!document.documentElement.contains(el)) return null;
                    do {
                        if (el.matches(s)) return el;
                        el = el.parentElement || el.parentNode;
                    } while (el !== null && el.nodeType === 1);
                    return null;
                };
            }

            //Custom Event() constructor
            if (typeof window.CustomEvent !== "function") {

                function CustomEvent(event, params) {
                    params = params || { bubbles: false, cancelable: false, detail: undefined };
                    var evt = document.createEvent('CustomEvent');
                    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
                    return evt;
                }

                CustomEvent.prototype = window.Event.prototype;

                window.CustomEvent = CustomEvent;
            }

            /*
             Animation curves
             */
            Math.easeInOutQuad = function (t, b, c, d) {
                t /= d / 2;
                if (t < 1) return c / 2 * t * t + b;
                t--;
                return -c / 2 * (t * (t - 2) - 1) + b;
            };
        </script>
        <!-- util functions included in the CodyHouse framework -->
        <script>(function () {
                // Multi-Level Accordion Menu - by CodyHouse.co
                var accordionsMenu = document.getElementsByClassName('cd-accordion--animated');

                if (accordionsMenu.length > 0 && window.requestAnimationFrame) {
                    for (var i = 0; i < accordionsMenu.length; i++) {
                        (function (i) {
                            accordionsMenu[i].addEventListener('change', function (event) {
                                animateAccordion(event.target);
                            });
                        })(i);
                    }

                    function animateAccordion(input) {
                        var bool = input.checked,
                            dropdown = input.parentNode.getElementsByClassName('cd-accordion__sub')[0];

                        Util.addClass(dropdown, 'cd-accordion__sub--is-visible'); // make sure subnav is visible while animating height

                        var initHeight = !bool ? dropdown.offsetHeight : 0,
                            finalHeight = !bool ? 0 : dropdown.offsetHeight;

                        Util.setHeight(initHeight, finalHeight, dropdown, 200, function () {
                            Util.removeClass(dropdown, 'cd-accordion__sub--is-visible');
                            dropdown.removeAttribute('style');
                        });
                    }
                }
            }());
        </script>


        <script>
            var closebtns = document.getElementsByClassName("close");
            var i;

            for (i = 0; i < closebtns.length; i++) {
                closebtns[i].addEventListener("click", function () {


                    var reply = confirm("Delete this diary?");

                    if (reply == true) {
                        alert(" delete complete")
                        this.parentElement.style.display = 'none';
                    }

                    else if (reply == false) {

                    }
                });
            }
        </script>

        <script>
            $(document).ready(function () {
                $('[data-toggle="tooltip"]').tooltip();

            });


        </script>
        <script>
            // Hide submenus
            $('#body-row .collapse').collapse('hide');

            // Collapse/Expand icon
            $('#collapse-icon').addClass('fa-angle-double-left');

            // Collapse click
            $('[data-toggle=sidebar-colapse]').click(function () {
                SidebarCollapse();
            });

            function SidebarCollapse() {
                $('.menu-collapsed').toggleClass('d-none');
                $('.sidebar-submenu').toggleClass('d-none');
                $('.submenu-icon').toggleClass('d-none');
                $('#sidebar-container').toggleClass('sidebar-expanded sidebar-collapsed');

                // Treating d-flex/d-none on separators with title
                var SeparatorTitle = $('.sidebar-separator-title');
                if (SeparatorTitle.hasClass('d-flex')) {
                    SeparatorTitle.removeClass('d-flex');
                } else {
                    SeparatorTitle.addClass('d-flex');
                }

                // Collapse/Expand icon
                $('#collapse-icon').toggleClass('fa-angle-double-left fa-angle-double-right');
            }
        </script>

        <script>
            $(document).ready(function () {



                $('#datatable').dataTable({

                    "paging": false,
                    "info": false,
                    "scrollY": "200px",
                    "scrollCollapse": true




                });


                $('[data-toggle="tooltip"]').tooltip()
                // $(.'close').tooltip('show')



            });



            function pic1() {
                document.getElementById("first").src = "../Mypage/img/diary2.png";
            }
            function pic2() {
                document.getElementById("first").src = "../Mypage/img/diary1.png";
            }
            function pic3() {
                document.getElementById("first").src = "../Mypage/img/diary4.png";
            }
            function pic4() {
                document.getElementById("first").src = "../Mypage/img/diary3.png";
            }
            function pic5() {
                document.getElementById("first").src = "../Mypage/img/diary5.png";
            }
            function pic6() {
                document.getElementById("first").src = "../Mypage/img/diary6.png";
            }
            function pic7() {
                document.getElementById("first").src = "../Mypage/img/diary7.png";
            }
            function pic8() {
                document.getElementById("first").src = "../Mypage/img/diary8.png";
            }
            function pic9() {
                document.getElementById("first").src = "../Mypage/img/diary9.png";
            }
            function pic10() {
                document.getElementById("first").src = "../Mypage/img/diary10.png";
            }
            function pic11() {
                document.getElementById("first").src = "../Mypage/img/diary11.png";
            }




            $(document).ready(function () {
                $('.toast').toast('show');
            });
        </script>
        <script>
            $('.panel-heading').on('click', function (e) {
                $(this).find('[class*="angle"]').toggleClass('fa-angle-left fa-angle-down')
            });
        </script>
        <script>

            $(document).ready(function () {
                $('#search').on("keyup", function () {
                    var value = $(this).val().toLowerCase();
                    $("#mycard ").filter(function () {
                        $(this).toggle($(this).find('.card-link').text().toLowerCase().indexOf(value) > -1)
                    });
                });
            });
        </script>
        <script>

            $(function () {
                $("#datepicker").datepicker({
                    dateFormat: "dd-mm-yy"
                    , duration: "fast",
                    onSelect: function (dateText, inst) {
                        var dateAsString = dateText; //the first parameter of this function
                        var time = $(this).datepicker({ dateFormat: 'dd,MM,yyyy' }).val(); //the getDate method
                        time = time.split('-');
                        alert(time);
                    }


                });


            });


        </script>
    </div>

</body>

</html>